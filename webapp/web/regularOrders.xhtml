<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
>

<h:head>
    <title>Menu</title>
    <h:outputStylesheet library="css" name="table-style.css"/>
</h:head>


<h:body>
    <h:form id="menu">
        <p:growl id="messages"/>

        <p:menubar>
            <p:menuitem value="Order history" action="history" icon="pi pi-times"/>
            <p:submenu label="Admin" icon="pi pi-cog">
                <p:menuitem value="Add course" action="PF('addCourseWizard').show()" icon="pi pi-save" update="menu"/>
                <p:menuitem value="Add category?" icon="pi pi-refresh" update="menu"/>
                <p:menuitem value="Edit category?" icon="pi pi-refresh" update="menu"/>
            </p:submenu>

            <f:facet name="options">
                <p:commandButton type="button" value="Logout" rendered="#{User.logged}" icon="pi pi-home"/>
                <p:commandButton type="button" value="Login" oncomplete="PF('sidebarLogin').show()"
                                 rendered="#{!User.logged}" icon="pi pi-home"/>
            </f:facet>
        </p:menubar>

        <p:dataTable var="order"
                     id="singleDT"
                     value="#{RegularOrder.schedules}"
                     selectionMode="single"
                     selection="#{RegularOrder.selectedSchedule}"
                     rowKey="#{order.id}"
                     expandableRowGroups="false">
            <p:column headerText="Day of Week" groupRow="true">
                <h:outputText value="#{order.dayOfWeek}"/>
            </p:column>
            <p:column headerText="Name">
                <h:outputText value="#{order.course.name}"/>
            </p:column>
            <p:column headerText="Size">
                <h:outputText value="#{order.course.size}"/>
            </p:column>
            <p:column headerText="Prize">
                <h:outputText value="#{order.course.prize}"/>
            </p:column>
            <p:column headerText="City">
                <h:outputText value="#{order.address.city}"/>
            </p:column>
            <p:column headerText="Street">
                <h:outputText value="#{order.address.street}"/>
            </p:column>
            <p:column headerText="Number">
                <h:outputText value="#{order.address.buildingNumber}/#{order.address.apartmentNumber}"/>
            </p:column>
        </p:dataTable>

        <p:contextMenu for="singleDT">
            <p:menuitem value="Delete" update="singleDT" icon="pi pi-times" action="#{RegularOrder.deleteSchedule()}"/>
        </p:contextMenu>
    </h:form>


</h:body>

</html>


